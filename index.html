<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Retro Build Tool</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/night.css">
		<link rel="stylesheet" href="dist/custom.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
					<textarea data-template>
						# Retro Build Tool
						### Maciej Ma≈Çecki<!-- .element: class="pink"-->
						Commodore Users Europe, December, 2021<!-- .element: class="cyan"-->

						--

						## about me

						A Commodore 64 user 1990-1994 and 2016-now.

						Learned `BASIC` and `ASM` on it.

						Working as software developer: `Java`, `Kotlin`, `JS`, `TS`.

						Always wanted to code games for C64.<!-- .element: class="cyan fragment"-->

						Never dared to code demos, but it would be cool, too!<!-- .element: class="pink fragment"-->

						---

						## continuous integration
						# automate<!-- .element: class="pink"-->
						# fail fast<!-- .element: class="cyan"-->

						--

						## why `make` is not enough?

						* Questionable portability.
						* It is ageing ;-)
						* A lot of work to set up new project...<!-- .element: class="cyan"-->
						* ... or copy and paste the old one.<!-- .element: class="pink fragment"-->

						---

						### what if we can make it *very* simple?

						```
						.
						..
						demo.asm
						build.gradle
						```

						`build.gradle`:
						``` groovy[]
						plugins {
							id "com.github.c64lib.retro-assembler" version "1.5.1"
						}
						retroProject {
							dialect = "KickAssembler"
							dialectVersion = "5.23"
						}
						```

						--

						## ...and run it<!-- .element: class="cyan"-->

						from command line<!-- .element: class="pink"-->

						```
						gradle build
						```

						![flow](img/flow.png)

						--

						## preprocessors

						Already supported: Charpad, Spritepad, Goattracker.

						```groovy[|8|9-23|24-31|32-38]
						plugins {
							id "com.github.c64lib.retro-assembler" version "1.5.1"
						}
						retroProject {
							dialect = "KickAssembler"
							dialectVersion = "5.23"
						}
						preprocess {
							charpad {
								input = file("logo.ctm")
								outputs {
									charset {
										output = file("charset.bin")
									}
									map {
										output = file("map.bin")
										left = 0
										top = 12
										right = 250
										bottom = 24
									}
								}
							}
							spritepad {
								input = file("player.spd")
								outputs {
									sprites {
										output = file("player.bin")
									}
								}
							}
							goattracker {
								input = file("music.sng")
								music {
									output = file("music.sid")
									playerMemoryLocation = 0xF5
								}
							}
						}
						```

						--

						![Preprocessors](img/preprocessors.png)

						---

						# demo #1
						### a simple image viewer

						---

						### using *CircleCI*

						Free to use.
						Integrates with `GitHub` and others.
						Offers consistent environment, running headless in the cloud.

						![ci flow](img/ci-flow.png)

						There is a Docker image with `vice`, `goattracker`, `exomizer` and `java` preinstalled.

						--

						![CircleCI](img/circleci.png)

						---

						# demo #2
						### continuous integration

						---

						## summary
						(roadmap)<!-- .element: class="cyan"-->

						![Roadmap](img/roadmap.png)

						--

						### find it on GitHub
						source code, releases, documentation<!-- .element: class="cyan"-->

						![QR Code](img/qr-github.png)

						https://github.com/c64lib/gradle-retro-assembler-plugin

					</textarea>

				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				slideNumber: "c/t",
				width: 1050,
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
